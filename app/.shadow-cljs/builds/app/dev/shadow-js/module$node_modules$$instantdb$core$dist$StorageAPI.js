["^ ","~:resource-id",["~:shadow.build.npm/resource","node_modules/@instantdb/core/dist/StorageAPI.js"],"~:js","shadow$provide.module$node_modules$$instantdb$core$dist$StorageAPI = function(global, require, module, exports) {\n  var __awaiter = this && this.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n      return value instanceof P ? value : new P(function(resolve) {\n        resolve(value);\n      });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n      function fulfilled(value) {\n        try {\n          step(generator.next(value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function rejected(value) {\n        try {\n          step(generator[\"throw\"](value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function step(result) {\n        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n      }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n  };\n  Object.defineProperty(exports, \"__esModule\", {value:!0});\n  exports.uploadFile = function(_a) {\n    return __awaiter(this, arguments, void 0, function*({apiURI, appId, path, file, refreshToken, contentType, contentDisposition}) {\n      appId = {app_id:appId, path, authorization:`Bearer ${refreshToken}`, \"content-type\":contentType || file.type};\n      contentDisposition && (appId[\"content-disposition\"] = contentDisposition);\n      return yield (0,fetch_1.jsonFetch)(`${apiURI}/storage/upload`, {method:\"PUT\", headers:appId, body:file});\n    });\n  };\n  exports.deleteFile = function(_a) {\n    return __awaiter(this, arguments, void 0, function*({apiURI, appId, path, refreshToken}) {\n      ({data:apiURI} = yield (0,fetch_1.jsonFetch)(`${apiURI}/storage/files?app_id=${appId}&filename=${encodeURIComponent(path)}`, {method:\"DELETE\", headers:{\"content-type\":\"application/json\", authorization:`Bearer ${refreshToken}`}}));\n      return apiURI;\n    });\n  };\n  exports.getSignedUploadUrl = function(_a) {\n    return __awaiter(this, arguments, void 0, function*({apiURI, appId, fileName, refreshToken}) {\n      ({data:apiURI} = yield (0,fetch_1.jsonFetch)(`${apiURI}/storage/signed-upload-url`, {method:\"POST\", headers:{\"content-type\":\"application/json\", authorization:`Bearer ${refreshToken}`}, body:JSON.stringify({app_id:appId, filename:fileName})}));\n      return apiURI;\n    });\n  };\n  exports.upload = function(presignedUrl, file) {\n    return __awaiter(this, void 0, void 0, function*() {\n      console.log(\"presignedUrl\", presignedUrl);\n      return (yield fetch(presignedUrl, {method:\"PUT\", body:file, headers:{\"Content-Type\":file.type}})).ok;\n    });\n  };\n  exports.getDownloadUrl = function(_a) {\n    return __awaiter(this, arguments, void 0, function*({apiURI, appId, path, refreshToken}) {\n      ({data:apiURI} = yield (0,fetch_1.jsonFetch)(`${apiURI}/storage/signed-download-url?app_id=${appId}&filename=${encodeURIComponent(path)}`, {method:\"GET\", headers:{\"content-type\":\"application/json\", authorization:`Bearer ${refreshToken}`}}));\n      return apiURI;\n    });\n  };\n  const fetch_1 = require(\"module$node_modules$$instantdb$core$dist$utils$fetch\");\n};\n","~:source","shadow$provide[\"module$node_modules$$instantdb$core$dist$StorageAPI\"] = function(global,require,module,exports) {\n\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.uploadFile = uploadFile;\nexports.deleteFile = deleteFile;\nexports.getSignedUploadUrl = getSignedUploadUrl;\nexports.upload = upload;\nexports.getDownloadUrl = getDownloadUrl;\nconst fetch_1 = require(\"./utils/fetch\");\nfunction uploadFile(_a) {\n    return __awaiter(this, arguments, void 0, function* ({ apiURI, appId, path, file, refreshToken, contentType, contentDisposition, }) {\n        const headers = {\n            app_id: appId,\n            path,\n            authorization: `Bearer ${refreshToken}`,\n            'content-type': contentType || file.type,\n        };\n        if (contentDisposition) {\n            headers['content-disposition'] = contentDisposition;\n        }\n        const data = yield (0, fetch_1.jsonFetch)(`${apiURI}/storage/upload`, {\n            method: 'PUT',\n            headers,\n            body: file,\n        });\n        return data;\n    });\n}\nfunction deleteFile(_a) {\n    return __awaiter(this, arguments, void 0, function* ({ apiURI, appId, path, refreshToken, }) {\n        const { data } = yield (0, fetch_1.jsonFetch)(`${apiURI}/storage/files?app_id=${appId}&filename=${encodeURIComponent(path)}`, {\n            method: 'DELETE',\n            headers: {\n                'content-type': 'application/json',\n                authorization: `Bearer ${refreshToken}`,\n            },\n        });\n        return data;\n    });\n}\n// Deprecated Storage API (Jan 2025)\n// ---------------------------------\nfunction getSignedUploadUrl(_a) {\n    return __awaiter(this, arguments, void 0, function* ({ apiURI, appId, fileName, refreshToken, metadata = {}, }) {\n        const { data } = yield (0, fetch_1.jsonFetch)(`${apiURI}/storage/signed-upload-url`, {\n            method: 'POST',\n            headers: {\n                'content-type': 'application/json',\n                authorization: `Bearer ${refreshToken}`,\n            },\n            body: JSON.stringify({\n                app_id: appId,\n                filename: fileName,\n            }),\n        });\n        return data;\n    });\n}\nfunction upload(presignedUrl, file) {\n    return __awaiter(this, void 0, void 0, function* () {\n        console.log('presignedUrl', presignedUrl);\n        const response = yield fetch(presignedUrl, {\n            method: 'PUT',\n            body: file,\n            headers: {\n                'Content-Type': file.type,\n            },\n        });\n        return response.ok;\n    });\n}\nfunction getDownloadUrl(_a) {\n    return __awaiter(this, arguments, void 0, function* ({ apiURI, appId, path, refreshToken, }) {\n        const { data } = yield (0, fetch_1.jsonFetch)(`${apiURI}/storage/signed-download-url?app_id=${appId}&filename=${encodeURIComponent(path)}`, {\n            method: 'GET',\n            headers: {\n                'content-type': 'application/json',\n                authorization: `Bearer ${refreshToken}`,\n            },\n        });\n        return data;\n    });\n}\n//# sourceMappingURL=StorageAPI.js.map\n};","~:removed-requires",["~#set",[]],"~:actual-requires",["^5",["~$shadow.js","~$module$node_modules$$instantdb$core$dist$utils$fetch"]],"~:properties",["^5",["body","upload","method","__esModule","path","uploadFile","getDownloadUrl","deleteFile","value","authorization","app_id","filename","getSignedUploadUrl","headers"]],"~:compiled-at",1756239699974,"~:source-map-json","{\n\"version\":3,\n\"file\":\"module$node_modules$$instantdb$core$dist$StorageAPI.js\",\n\"lineCount\":63,\n\"mappings\":\"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\",\n\"sources\":[\"node_modules/@instantdb/core/dist/StorageAPI.js\"],\n\"sourcesContent\":[\"shadow$provide[\\\"module$node_modules$$instantdb$core$dist$StorageAPI\\\"] = function(global,require,module,exports) {\\n\\\"use strict\\\";\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.uploadFile = uploadFile;\\nexports.deleteFile = deleteFile;\\nexports.getSignedUploadUrl = getSignedUploadUrl;\\nexports.upload = upload;\\nexports.getDownloadUrl = getDownloadUrl;\\nconst fetch_1 = require(\\\"./utils/fetch\\\");\\nfunction uploadFile(_a) {\\n    return __awaiter(this, arguments, void 0, function* ({ apiURI, appId, path, file, refreshToken, contentType, contentDisposition, }) {\\n        const headers = {\\n            app_id: appId,\\n            path,\\n            authorization: `Bearer ${refreshToken}`,\\n            'content-type': contentType || file.type,\\n        };\\n        if (contentDisposition) {\\n            headers['content-disposition'] = contentDisposition;\\n        }\\n        const data = yield (0, fetch_1.jsonFetch)(`${apiURI}/storage/upload`, {\\n            method: 'PUT',\\n            headers,\\n            body: file,\\n        });\\n        return data;\\n    });\\n}\\nfunction deleteFile(_a) {\\n    return __awaiter(this, arguments, void 0, function* ({ apiURI, appId, path, refreshToken, }) {\\n        const { data } = yield (0, fetch_1.jsonFetch)(`${apiURI}/storage/files?app_id=${appId}&filename=${encodeURIComponent(path)}`, {\\n            method: 'DELETE',\\n            headers: {\\n                'content-type': 'application/json',\\n                authorization: `Bearer ${refreshToken}`,\\n            },\\n        });\\n        return data;\\n    });\\n}\\n// Deprecated Storage API (Jan 2025)\\n// ---------------------------------\\nfunction getSignedUploadUrl(_a) {\\n    return __awaiter(this, arguments, void 0, function* ({ apiURI, appId, fileName, refreshToken, metadata = {}, }) {\\n        const { data } = yield (0, fetch_1.jsonFetch)(`${apiURI}/storage/signed-upload-url`, {\\n            method: 'POST',\\n            headers: {\\n                'content-type': 'application/json',\\n                authorization: `Bearer ${refreshToken}`,\\n            },\\n            body: JSON.stringify({\\n                app_id: appId,\\n                filename: fileName,\\n            }),\\n        });\\n        return data;\\n    });\\n}\\nfunction upload(presignedUrl, file) {\\n    return __awaiter(this, void 0, void 0, function* () {\\n        console.log('presignedUrl', presignedUrl);\\n        const response = yield fetch(presignedUrl, {\\n            method: 'PUT',\\n            body: file,\\n            headers: {\\n                'Content-Type': file.type,\\n            },\\n        });\\n        return response.ok;\\n    });\\n}\\nfunction getDownloadUrl(_a) {\\n    return __awaiter(this, arguments, void 0, function* ({ apiURI, appId, path, refreshToken, }) {\\n        const { data } = yield (0, fetch_1.jsonFetch)(`${apiURI}/storage/signed-download-url?app_id=${appId}&filename=${encodeURIComponent(path)}`, {\\n            method: 'GET',\\n            headers: {\\n                'content-type': 'application/json',\\n                authorization: `Bearer ${refreshToken}`,\\n            },\\n        });\\n        return data;\\n    });\\n}\\n//# sourceMappingURL=StorageAPI.js.map\\n};\"],\n\"names\":[\"shadow$provide\",\"global\",\"require\",\"module\",\"exports\",\"__awaiter\",\"thisArg\",\"_arguments\",\"P\",\"generator\",\"adopt\",\"value\",\"resolve\",\"Promise\",\"reject\",\"fulfilled\",\"step\",\"next\",\"e\",\"rejected\",\"result\",\"done\",\"then\",\"apply\",\"Object\",\"defineProperty\",\"uploadFile\",\"_a\",\"arguments\",\"apiURI\",\"appId\",\"path\",\"file\",\"refreshToken\",\"contentType\",\"contentDisposition\",\"headers\",\"app_id\",\"authorization\",\"type\",\"data\",\"fetch_1\",\"jsonFetch\",\"method\",\"body\",\"deleteFile\",\"encodeURIComponent\",\"getSignedUploadUrl\",\"fileName\",\"JSON\",\"stringify\",\"filename\",\"upload\",\"presignedUrl\",\"console\",\"log\",\"ok\",\"response\",\"fetch\",\"getDownloadUrl\"]\n}\n"]